import{v as se,r as c,j as e,w as re,x as oe,z as ae,A as ne,y as ce}from"./index-CcvC8-cw.js";import{u as le,c as ie,a as E,h as w}from"./handleClasses-CEU6cCPk.js";import{C as A}from"./Container-AEDfiAQj.js";import{c as y,u as g}from"./ThemeProvider-DDOiuAEa.js";import{C as I,R as de}from"./Row-C0po-6st.js";import{h as pe}from"./ElementChildren-D4o9xE3a.js";import{C as B}from"./Col-824mH0nu.js";import{B as N}from"./Button-07-cplN6.js";import"./Button-CqBvrDVS.js";var G={exports:{}},me="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ue=me,he=ue;function M(){}function V(){}V.resetWarningCache=M;var fe=function(){function t(a,n,l,p,j,u){if(u!==he){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}t.isRequired=t;function s(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:s,element:t,elementType:t,instanceOf:s,node:t,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:V,resetWarningCache:M};return r.PropTypes=r,r};G.exports=fe();var je=G.exports;const R=se(je),xe={type:R.string,tooltip:R.bool,as:R.elementType},_=c.forwardRef(({as:t="div",className:s,type:r="valid",tooltip:a=!1,...n},l)=>e.jsx(t,{...n,ref:l,className:y(s,`${r}-${a?"tooltip":"feedback"}`)}));_.displayName="Feedback";_.propTypes=xe;const C=c.createContext({}),U=c.forwardRef(({id:t,bsPrefix:s,className:r,type:a="checkbox",isValid:n=!1,isInvalid:l=!1,as:p="input",...j},u)=>{const{controlId:m}=c.useContext(C);return s=g(s,"form-check-input"),e.jsx(p,{...j,ref:u,type:a,id:t||m,className:y(r,s,n&&"is-valid",l&&"is-invalid")})});U.displayName="FormCheckInput";const O=c.forwardRef(({bsPrefix:t,className:s,htmlFor:r,...a},n)=>{const{controlId:l}=c.useContext(C);return t=g(t,"form-check-label"),e.jsx("label",{...a,ref:n,htmlFor:r||l,className:y(s,t)})});O.displayName="FormCheckLabel";const W=c.forwardRef(({id:t,bsPrefix:s,bsSwitchPrefix:r,inline:a=!1,reverse:n=!1,disabled:l=!1,isValid:p=!1,isInvalid:j=!1,feedbackTooltip:u=!1,feedback:m,feedbackType:F,className:$,style:k,title:b="",type:L="checkbox",label:S,children:i,as:T="input",...d},o)=>{s=g(s,"form-check"),r=g(r,"form-switch");const{controlId:x}=c.useContext(C),h=c.useMemo(()=>({controlId:t||x}),[x,t]),f=!i&&S!=null&&S!==!1||pe(i,O),te=e.jsx(U,{...d,type:L==="switch"?"checkbox":L,ref:o,isValid:p,isInvalid:j,disabled:l,as:T});return e.jsx(C.Provider,{value:h,children:e.jsx("div",{style:k,className:y($,f&&s,a&&`${s}-inline`,n&&`${s}-reverse`,L==="switch"&&r),children:i||e.jsxs(e.Fragment,{children:[te,f&&e.jsx(O,{title:b,children:S}),m&&e.jsx(_,{type:F,tooltip:u,children:m})]})})})});W.displayName="FormCheck";const q=Object.assign(W,{Input:U,Label:O}),H=c.forwardRef(({bsPrefix:t,type:s,size:r,htmlSize:a,id:n,className:l,isValid:p=!1,isInvalid:j=!1,plaintext:u,readOnly:m,as:F="input",...$},k)=>{const{controlId:b}=c.useContext(C);return t=g(t,"form-control"),e.jsx(F,{...$,type:s,size:a,ref:k,readOnly:m,id:n||b,className:y(l,u?`${t}-plaintext`:t,r&&`${t}-${r}`,s==="color"&&`${t}-color`,p&&"is-valid",j&&"is-invalid")})});H.displayName="FormControl";const ye=Object.assign(H,{Feedback:_}),z=c.forwardRef(({className:t,bsPrefix:s,as:r="div",...a},n)=>(s=g(s,"form-floating"),e.jsx(r,{ref:n,className:y(t,s),...a})));z.displayName="FormFloating";const D=c.forwardRef(({controlId:t,as:s="div",...r},a)=>{const n=c.useMemo(()=>({controlId:t}),[t]);return e.jsx(C.Provider,{value:n,children:e.jsx(s,{...r,ref:a})})});D.displayName="FormGroup";const Q=c.forwardRef(({as:t="label",bsPrefix:s,column:r=!1,visuallyHidden:a=!1,className:n,htmlFor:l,...p},j)=>{const{controlId:u}=c.useContext(C);s=g(s,"form-label");let m="col-form-label";typeof r=="string"&&(m=`${m} ${m}-${r}`);const F=y(n,s,a&&"visually-hidden",r&&m);return l=l||u,r?e.jsx(B,{ref:j,as:"label",className:F,htmlFor:l,...p}):e.jsx(t,{ref:j,className:F,htmlFor:l,...p})});Q.displayName="FormLabel";const Y=c.forwardRef(({bsPrefix:t,className:s,id:r,...a},n)=>{const{controlId:l}=c.useContext(C);return t=g(t,"form-range"),e.jsx("input",{...a,type:"range",ref:n,className:y(s,t),id:r||l})});Y.displayName="FormRange";const J=c.forwardRef(({bsPrefix:t,size:s,htmlSize:r,className:a,isValid:n=!1,isInvalid:l=!1,id:p,...j},u)=>{const{controlId:m}=c.useContext(C);return t=g(t,"form-select"),e.jsx("select",{...j,size:r,ref:u,className:y(a,t,s&&`${t}-${s}`,n&&"is-valid",l&&"is-invalid"),id:p||m})});J.displayName="FormSelect";const K=c.forwardRef(({bsPrefix:t,className:s,as:r="small",muted:a,...n},l)=>(t=g(t,"form-text"),e.jsx(r,{...n,ref:l,className:y(s,t,a&&"text-muted")})));K.displayName="FormText";const X=c.forwardRef((t,s)=>e.jsx(q,{...t,ref:s,type:"switch"}));X.displayName="Switch";const ge=Object.assign(X,{Input:q.Input,Label:q.Label}),Z=c.forwardRef(({bsPrefix:t,className:s,children:r,controlId:a,label:n,...l},p)=>(t=g(t,"form-floating"),e.jsxs(D,{ref:p,className:y(s,t),controlId:a,...l,children:[r,e.jsx("label",{htmlFor:a,children:n})]})));Z.displayName="FloatingLabel";const Ne={_ref:R.any,validated:R.bool,as:R.elementType},P=c.forwardRef(({className:t,validated:s,as:r="form",...a},n)=>e.jsx(r,{...a,ref:n,className:y(t,s&&"was-validated")}));P.displayName="Form";P.propTypes=Ne;const v=Object.assign(P,{Group:D,Control:ye,Floating:z,Check:q,Switch:ge,Label:Q,Text:K,Range:Y,Select:J,FloatingLabel:Z}),ee=c.forwardRef(({bsPrefix:t,variant:s,animation:r="border",size:a,as:n="div",className:l,...p},j)=>{t=g(t,"spinner");const u=`${t}-${r}`;return e.jsx(n,{ref:j,...p,className:y(l,u,a&&`${u}-${a}`,s&&`text-${s}`)})});ee.displayName="Spinner";const Te=()=>{const[t,s]=c.useState(!1),[r,a]=c.useState([]),[n,l]=c.useState([]),{data:p}=re(),[j,{isSuccess:u,isLoading:m}]=oe(),[F,{isSuccess:$,isLoading:k}]=ae(),[b,{isSuccess:L,isLoading:S}]=ne(),[i,T]=c.useState(),d=le({enableReinitialize:!0,initialValues:{name:i?i.name:"",price:i?i.price:"",description:i?i.description:"",productImg:i?i.productImg:"",quantity:i?i.quantity:""},validationSchema:ie({name:E().required("Enter Name"),price:E().required("Enter price"),description:E().required("Enter description"),quantity:E().required("Enter quantity")}),onSubmit:(o,{resetForm:x})=>{if(i){const h=new FormData;for(const f in o)f!=="productImg"&&h.append(f,o[f]);for(const f of r)h.append("remove",f);for(const f of o.productImg)h.append("productImg",f);F({_id:i._id,fd:h}),T(null)}else{const h=new FormData;for(const f in o)f!=="productImg"&&h.append(f,o[f]);for(const f of o.productImg)h.append("productImg",f);j(h)}l([]),x()}});return c.useEffect(()=>{u&&ce.success("product create success")},[u]),e.jsxs(e.Fragment,{children:[e.jsx(A,{children:m||S||k?e.jsxs(e.Fragment,{children:["Please wait...",e.jsx(ee,{})]}):e.jsxs(I,{children:[e.jsx(I.Header,{children:" Proctuct Detail"}),e.jsx(I.Body,{children:e.jsx(v,{onSubmit:d.handleSubmit,children:e.jsxs(v.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[e.jsx(v.Control,{...d.getFieldProps("name"),className:w(d,"name"),type:"text",placeholder:"Enter Product"}),e.jsx("span",{className:"invalid-feedback",children:d.errors.name}),e.jsx(v.Control,{...d.getFieldProps("price"),className:w(d,"price"),type:"number",placeholder:"Enter price"}),e.jsx("span",{className:"invalid-feedback",children:d.errors.price}),e.jsx(v.Control,{...d.getFieldProps("description"),className:w(d,"description"),type:"text",placeholder:"Enter description"}),e.jsx("span",{className:"invalid-feedback",children:d.errors.description}),i?e.jsxs(e.Fragment,{children:[i.productImg.map(o=>e.jsx("div",{children:e.jsxs("div",{className:`${r.includes(o)&&"border border-danger my-2"} d-flex align-items-center justify-content-between px-4`,children:[e.jsx("img",{src:o,height:100,className:"me-2 rounded-3"}),r.includes(o)?e.jsx(N,{variant:"dark",onClick:x=>a(r.filter(h=>h!==o)),children:"Cancel"}):e.jsx(N,{onClick:x=>{r.includes(o)||a([...r,o])},children:"Remove"})]})})),t?e.jsxs(e.Fragment,{children:[e.jsx(v.Control,{className:w(d,"productImg"),type:"file",multiple:!0,onChange:o=>{const x=[];for(const h of o.target.files)x.push(URL.createObjectURL(h));d.setFieldValue("productImg",o.target.files),l(x)},placeholder:"Enter new productImg"}),e.jsx(N,{onClick:o=>s(null),className:"me-2",children:"Cancel"})]}):e.jsx(N,{onClick:o=>s(!0),className:"me-2",children:"Add new Image"})]}):e.jsxs(e.Fragment,{children:[e.jsx(v.Control,{className:w(d,"productImg"),type:"file",multiple:!0,onChange:o=>{const x=[];for(const h of o.target.files)x.push(URL.createObjectURL(h));d.setFieldValue("productImg",o.target.files),l(x)},placeholder:"Enter productImg"}),n.map(o=>e.jsx("img",{src:o,height:50}))]}),e.jsx(v.Control,{...d.getFieldProps("quantity"),className:w(d,"quantity"),type:"number",placeholder:"Enter quantity"}),e.jsx("span",{className:"invalid-feedback",children:d.errors.quantity}),i?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-100 mb-2",variant:"warning",type:"submit",children:"Update product"}),e.jsx(N,{className:"w-100",variant:"outline-dark",type:"button",onClick:o=>T(null),children:"Cancel"})]}):e.jsx(N,{variant:"info",type:"submit",children:"Add product"})]})})})]})}),e.jsx(A,{children:e.jsx(de,{children:e.jsx(B,{children:e.jsxs(I,{children:[e.jsx(I.Header,{children:"All Products"}),e.jsx(I.Body,{children:e.jsxs("table",{className:"table table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"name"}),e.jsx("th",{scope:"col",children:"price"}),e.jsx("th",{scope:"col",children:"description"}),e.jsx("th",{scope:"col",children:"productImg"}),e.jsx("th",{scope:"col",children:"quantity"}),e.jsx("th",{scope:"col",children:"actions"})]})}),e.jsx("tbody",{children:p&&p.result.map(o=>e.jsxs("tr",{children:[e.jsx("td",{children:o.name}),e.jsx("td",{children:o.price}),e.jsx("td",{children:o.description}),e.jsx("td",{children:o.productImg.map(x=>e.jsx("img",{src:x,height:50,className:"mx-2 rounded"}))}),e.jsx("td",{children:o.quantity}),e.jsxs("td",{children:[e.jsx(N,{className:"me-2",variant:"warning",onClick:x=>T(o),children:"Edit"}),e.jsx(N,{className:"me-2",variant:"danger",onClick:()=>b(o._id),children:"Delete"})]})]},o._id))})]})})]})})})})]})};export{Te as default};
